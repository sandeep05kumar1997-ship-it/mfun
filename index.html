<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Survival Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            overflow: hidden;
            background: linear-gradient(to bottom, #87CEEB 0%, #98D8C8 100%);
        }

        #gameCanvas {
            display: block;
            background: linear-gradient(to bottom, #87CEEB 0%, #7FBA7F 50%, #228B22 100%);
            cursor: crosshair;
        }

        #gameInfo {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            font-size: 18px;
            z-index: 10;
        }

        #controls {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 15px;
            border-radius: 10px;
            font-size: 14px;
            z-index: 10;
        }

        #gameOver {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            display: none;
            z-index: 100;
        }

        #gameOver h2 {
            font-size: 36px;
            margin-bottom: 20px;
            color: #ff6b6b;
        }

        #gameOver button {
            margin-top: 20px;
            padding: 15px 40px;
            font-size: 18px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        #gameOver button:hover {
            background: #45a049;
            transform: scale(1.05);
        }

        .dialogue {
            position: absolute;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 20px;
            border-radius: 15px;
            border: 3px solid #333;
            font-size: 16px;
            max-width: 250px;
            pointer-events: none;
            z-index: 50;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        .health-bar {
            position: absolute;
            top: 120px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            z-index: 10;
        }

        .health-bar-fill {
            width: 200px;
            height: 25px;
            background: #333;
            border-radius: 5px;
            overflow: hidden;
        }

        .health-bar-inner {
            height: 100%;
            background: linear-gradient(to right, #ff6b6b, #ff4757);
            transition: width 0.3s;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    
    <div id="gameInfo">
        <div>üèÜ Score: <span id="score">0</span></div>
        <div>‚≠ê Points: <span id="points">0</span></div>
    </div>

    <div class="health-bar">
        <div style="color: white; margin-bottom: 5px;">‚ù§Ô∏è Health</div>
        <div class="health-bar-fill">
            <div class="health-bar-inner" id="healthBar" style="width: 100%"></div>
        </div>
    </div>

    <div id="controls">
        <div><b>Controls:</b></div>
        <div>üéÆ Arrow Keys - Move</div>
        <div>üèÉ SHIFT - Run</div>
        <div>ü•ä SPACE - Attack</div>
        <div>üè† H - Hide in House</div>
        <div>üí¨ T - Talk</div>
    </div>

    <div id="gameOver">
        <h2>Game Over!</h2>
        <p id="finalScore"></p>
        <button onclick="restartGame()">Restart Game</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Game Audio (simulated with Web Audio API)
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        function playSound(freq, duration, type = 'sine') {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.frequency.value = freq;
            osc.type = type;
            gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
            osc.start();
            osc.stop(audioCtx.currentTime + duration);
        }

        // Game State
        const game = {
            score: 0,
            points: 0,
            health: 100,
            isRunning: false,
            isHiding: false,
            lastAttackTime: 0,
            dialogues: []
        };

        // Player
        const player = {
            x: canvas.width / 2,
            y: canvas.height - 150,
            width: 30,
            height: 50,
            speed: 3,
            dx: 0,
            dy: 0,
            hasStick: true
        };

        // Girl character
        const girl = {
            x: canvas.width / 2 + 80,
            y: canvas.height - 150,
            width: 28,
            height: 48
        };

        // Snake
        const snake = {
            x: 100,
            y: 100,
            width: 60,
            height: 40,
            speed: 2,
            dx: 1,
            dy: 1,
            health: 100
        };

        // Environment objects
        const trees = [];
        const rocks = [];
        const houses = [];
        const fruits = [];

        // Initialize environment
        function initEnvironment() {
            // Create trees with fruits
            for (let i = 0; i < 15; i++) {
                const tree = {
                    x: Math.random() * canvas.width,
                    y: Math.random() * (canvas.height - 200) + 50,
                    size: 40 + Math.random() * 30
                };
                trees.push(tree);
                
                // Add fruits to some trees
                if (Math.random() > 0.5) {
                    fruits.push({
                        x: tree.x,
                        y: tree.y,
                        collected: false
                    });
                }
            }

            // Create rocks
            for (let i = 0; i < 10; i++) {
                rocks.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * (canvas.height - 200) + 100,
                    size: 30 + Math.random() * 20
                });
            }

            // Create houses
            for (let i = 0; i < 3; i++) {
                houses.push({
                    x: 100 + i * 400,
                    y: canvas.height - 200,
                    width: 120,
                    height: 100
                });
            }
        }

        // Draw functions
        function drawSky() {
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height / 2);
            gradient.addColorStop(0, '#87CEEB');
            gradient.addColorStop(1, '#E0F6FF');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height / 2);
        }

        function drawGround() {
            ctx.fillStyle = '#7FBA7F';
            ctx.fillRect(0, canvas.height / 2, canvas.width, canvas.height / 2);
            
            // Grass details
            ctx.strokeStyle = '#6FA76F';
            for (let i = 0; i < 100; i++) {
                const x = Math.random() * canvas.width;
                const y = canvas.height / 2 + Math.random() * (canvas.height / 2);
                ctx.beginPath();
                ctx.moveTo(x, y);
                ctx.lineTo(x, y - 5);
                ctx.stroke();
            }
        }

        function drawPond() {
            ctx.fillStyle = '#4A90E2';
            ctx.beginPath();
            ctx.ellipse(canvas.width - 200, canvas.height - 150, 100, 60, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // Water ripples
            ctx.strokeStyle = '#6BB6FF';
            ctx.lineWidth = 2;
            for (let i = 0; i < 3; i++) {
                ctx.beginPath();
                ctx.ellipse(canvas.width - 200, canvas.height - 150, 70 - i * 20, 40 - i * 10, 0, 0, Math.PI * 2);
                ctx.stroke();
            }
        }

        function drawWaterfall() {
            ctx.fillStyle = '#87CEEB';
            ctx.fillRect(150, 80, 30, 100);
            
            // Water flow effect
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 2;
            for (let i = 0; i < 5; i++) {
                const offset = (Date.now() / 100 + i * 20) % 100;
                ctx.beginPath();
                ctx.moveTo(165, 80 + offset);
                ctx.lineTo(165, 90 + offset);
                ctx.stroke();
            }
        }

        function drawTrees() {
            trees.forEach(tree => {
                // Tree trunk
                ctx.fillStyle = '#8B4513';
                ctx.fillRect(tree.x - 10, tree.y, 20, tree.size);
                
                // Tree crown
                ctx.fillStyle = '#228B22';
                ctx.beginPath();
                ctx.arc(tree.x, tree.y - 10, tree.size / 2, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = '#2E7D32';
                ctx.beginPath();
                ctx.arc(tree.x - 15, tree.y - 5, tree.size / 2.5, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.beginPath();
                ctx.arc(tree.x + 15, tree.y - 5, tree.size / 2.5, 0, Math.PI * 2);
                ctx.fill();
            });
        }

        function drawFruits() {
            fruits.forEach(fruit => {
                if (!fruit.collected) {
                    ctx.fillStyle = '#FF6347';
                    ctx.beginPath();
                    ctx.arc(fruit.x + 20, fruit.y - 30, 8, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.fillStyle = '#32CD32';
                    ctx.fillRect(fruit.x + 19, fruit.y - 35, 3, 8);
                }
            });
        }

        function drawRocks() {
            rocks.forEach(rock => {
                ctx.fillStyle = '#808080';
                ctx.beginPath();
                ctx.ellipse(rock.x, rock.y, rock.size, rock.size * 0.6, 0, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = '#A9A9A9';
                ctx.beginPath();
                ctx.ellipse(rock.x - 5, rock.y - 5, rock.size * 0.6, rock.size * 0.4, 0, 0, Math.PI * 2);
                ctx.fill();
            });
        }

        function drawHouses() {
            houses.forEach(house => {
                // House body
                ctx.fillStyle = '#D2691E';
                ctx.fillRect(house.x, house.y, house.width, house.height);
                
                // Roof
                ctx.fillStyle = '#8B4513';
                ctx.beginPath();
                ctx.moveTo(house.x - 10, house.y);
                ctx.lineTo(house.x + house.width / 2, house.y - 40);
                ctx.lineTo(house.x + house.width + 10, house.y);
                ctx.closePath();
                ctx.fill();
                
                // Door
                ctx.fillStyle = '#654321';
                ctx.fillRect(house.x + 40, house.y + 40, 40, 60);
                
                // Window
                ctx.fillStyle = '#87CEEB';
                ctx.fillRect(house.x + 20, house.y + 30, 30, 30);
            });
        }

        function drawPlayer() {
            if (game.isHiding) return;
            
            // Body
            ctx.fillStyle = '#FFD700';
            ctx.fillRect(player.x - 12, player.y + 15, 24, 30);
            
            // Head
            ctx.fillStyle = '#FFDAB9';
            ctx.beginPath();
            ctx.arc(player.x, player.y, 15, 0, Math.PI * 2);
            ctx.fill();
            
            // Eyes
            ctx.fillStyle = 'black';
            ctx.beginPath();
            ctx.arc(player.x - 5, player.y - 2, 2, 0, Math.PI * 2);
            ctx.arc(player.x + 5, player.y - 2, 2, 0, Math.PI * 2);
            ctx.fill();
            
            // Smile
            ctx.strokeStyle = 'black';
            ctx.beginPath();
            ctx.arc(player.x, player.y + 3, 6, 0, Math.PI);
            ctx.stroke();
            
            // Stick
            if (player.hasStick) {
                ctx.strokeStyle = '#8B4513';
                ctx.lineWidth = 4;
                ctx.beginPath();
                ctx.moveTo(player.x + 15, player.y + 20);
                ctx.lineTo(player.x + 30, player.y + 50);
                ctx.stroke();
            }
            
            // Legs
            ctx.strokeStyle = '#4169E1';
            ctx.lineWidth = 5;
            ctx.beginPath();
            ctx.moveTo(player.x - 6, player.y + 45);
            ctx.lineTo(player.x - 8, player.y + 60);
            ctx.moveTo(player.x + 6, player.y + 45);
            ctx.lineTo(player.x + 8, player.y + 60);
            ctx.stroke();
        }

        function drawGirl() {
            if (game.isHiding) return;
            
            // Dress
            ctx.fillStyle = '#FF69B4';
            ctx.beginPath();
            ctx.moveTo(girl.x, girl.y + 15);
            ctx.lineTo(girl.x - 15, girl.y + 45);
            ctx.lineTo(girl.x + 15, girl.y + 45);
            ctx.closePath();
            ctx.fill();
            
            // Head
            ctx.fillStyle = '#FFDAB9';
            ctx.beginPath();
            ctx.arc(girl.x, girl.y, 14, 0, Math.PI * 2);
            ctx.fill();
            
            // Hair
            ctx.fillStyle = '#4B0082';
            ctx.beginPath();
            ctx.arc(girl.x, girl.y - 5, 16, Math.PI, 0);
            ctx.fill();
            
            // Eyes
            ctx.fillStyle = 'black';
            ctx.beginPath();
            ctx.arc(girl.x - 4, girl.y - 2, 2, 0, Math.PI * 2);
            ctx.arc(girl.x + 4, girl.y - 2, 2, 0, Math.PI * 2);
            ctx.fill();
            
            // Smile
            ctx.strokeStyle = '#FF1493';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(girl.x, girl.y + 3, 5, 0, Math.PI);
            ctx.stroke();
        }

        function drawSnake() {
            const time = Date.now() / 200;
            
            // Snake body (multiple segments)
            for (let i = 0; i < 5; i++) {
                const offsetX = Math.sin(time + i * 0.5) * 10;
                const offsetY = Math.cos(time + i * 0.3) * 5;
                
                ctx.fillStyle = i % 2 === 0 ? '#228B22' : '#32CD32';
                ctx.beginPath();
                ctx.ellipse(
                    snake.x - i * 12 + offsetX,
                    snake.y + offsetY,
                    15,
                    12,
                    0,
                    0,
                    Math.PI * 2
                );
                ctx.fill();
            }
            
            // Snake head
            ctx.fillStyle = '#006400';
            ctx.beginPath();
            ctx.ellipse(snake.x, snake.y, 18, 15, 0, 0, Math.PI * 2);
            ctx.fill();
            
            // Eyes
            ctx.fillStyle = '#FF0000';
            ctx.beginPath();
            ctx.arc(snake.x - 5, snake.y - 5, 3, 0, Math.PI * 2);
            ctx.arc(snake.x + 5, snake.y - 5, 3, 0, Math.PI * 2);
            ctx.fill();
            
            // Fangs
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(snake.x - 3, snake.y + 10);
            ctx.lineTo(snake.x - 3, snake.y + 15);
            ctx.moveTo(snake.x + 3, snake.y + 10);
            ctx.lineTo(snake.x + 3, snake.y + 15);
            ctx.stroke();
            
            // Tongue
            ctx.strokeStyle = '#FF0000';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(snake.x, snake.y + 12);
            const tongueX = snake.x + Math.sin(time * 3) * 15;
            ctx.lineTo(tongueX, snake.y + 18);
            ctx.stroke();
        }

        function showDialogue(text, x, y) {
            const dialogue = document.createElement('div');
            dialogue.className = 'dialogue';
            dialogue.textContent = text;
            dialogue.style.left = x + 'px';
            dialogue.style.top = y + 'px';
            document.body.appendChild(dialogue);
            
            setTimeout(() => {
                dialogue.remove();
            }, 3000);
        }

        // Game Logic
        function movePlayer() {
            const speed = game.isRunning ? player.speed * 1.8 : player.speed;
            
            player.x += player.dx * speed;
            player.y += player.dy * speed;
            
            // Boundaries
            player.x = Math.max(30, Math.min(canvas.width - 30, player.x));
            player.y = Math.max(30, Math.min(canvas.height - 70, player.y));
            
            // Girl follows player
            const dx = player.x - girl.x;
            const dy = player.y - girl.y;
            const dist = Math.sqrt(dx * dx + dy * dy);
            
            if (dist > 60) {
                girl.x += (dx / dist) * 2;
                girl.y += (dy / dist) * 2;
            }
        }

        function moveSnake() {
            const dx = player.x - snake.x;
            const dy = player.y - snake.y;
            const dist = Math.sqrt(dx * dx + dy * dy);
            
            if (dist < 300 && !game.isHiding) {
                snake.x += (dx / dist) * snake.speed;
                snake.y += (dy / dist) * snake.speed;
                
                // Hissing sound
                if (Math.random() < 0.02) {
                    playSound(150, 0.3, 'sawtooth');
                }
            } else {
                snake.x += snake.dx * snake.speed;
                snake.y += snake.dy * snake.speed;
                
                if (snake.x < 0 || snake.x > canvas.width) snake.dx *= -1;
                if (snake.y < 50 || snake.y > canvas.height - 100) snake.dy *= -1;
            }
        }

        function checkCollisions() {
            // Snake collision with player
            const dist = Math.sqrt(
                Math.pow(player.x - snake.x, 2) + 
                Math.pow(player.y - snake.y, 2)
            );
            
            if (dist < 50 && !game.isHiding) {
                game.health -= 0.5;
                playSound(200, 0.1, 'square');
                
                if (game.health <= 0) {
                    gameOver();
                }
            }
            
            // Rock collision with snake
            rocks.forEach(rock => {
                const rockDist = Math.sqrt(
                    Math.pow(snake.x - rock.x, 2) + 
                    Math.pow(snake.y - rock.y, 2)
                );
                
                if (rockDist < rock.size + 20) {
                    snake.dx *= -1;
                    snake.dy *= -1;
                    snake.health -= 10;
                    game.points += 5;
                    playSound(300, 0.2, 'triangle');
                    showDialogue('üêç Ouch! Patthar se takkar!', snake.x, snake.y - 50);
                }
            });
            
            // Fruit collection
            fruits.forEach(fruit => {
                if (!fruit.collected) {
                    const fruitDist = Math.sqrt(
                        Math.pow(player.x - fruit.x, 2) + 
                        Math.pow(player.y - fruit.y, 2)
                    );
                    
                    if (fruitDist < 40) {
                        fruit.collected = true;
                        game.points += 10;
                        game.health = Math.min(100, game.health + 5);
                        playSound(600, 0.2, 'sine');
                        showDialogue('üçé Yummy! +10 points', player.x, player.y - 70);
                    }
                }
            });
        }

        function attack() {
            const now = Date.now();
            if (now - game.lastAttackTime < 1000) return;
            
            game.lastAttackTime = now;
            const dist = Math.sqrt(
                Math.pow(player.x - snake.x, 2) + 
                Math.pow(player.y - snake.y, 2)
            );
            
            if (dist < 80) {
                snake.health -= 20;
                game.points += 15;
                playSound(400, 0.3, 'square');
                showDialogue('üí• Danda se maar diya!', player.x, player.y - 70);
                
                if (snake.health <= 0) {
                    game.score += 100;
                    snake.health = 100;
                    snake.x = Math.random() * canvas.width;
                    snake.y = Math.random() * 200 + 50;
                    showDialogue('üèÜ Saanp ko haraaya!', canvas.width / 2, canvas.height / 2);
                }
            }
        }

        function talk() {
            const dist = Math.sqrt(
                Math.pow(player.x - snake.x, 2) + 
                Math.pow(player.y - snake.y, 2)
            );
            
            if (dist < 150) {
                const dialogues = [
                    { speaker: 'üë®', text: 'Mujhe mat khao saanp!', x: player.x, y: player.y - 70 },
                    { speaker: 'üêç', text: 'Mujhe toh bhookh lagi hai!', x: snake.x, y: snake.y - 60 }
                ];
                
                const dialogue = dialogues[Math.floor(Math.random() * dialogues.length)];
                showDialogue(dialogue.speaker + ' ' + dialogue.text, dialogue.x, dialogue.y);
                playSound(300, 0.2, 'sine');
            }
        }

        function hideInHouse() {
            houses.forEach(house => {
                if (player.x > house.x && player.x < house.x + house.width &&
                    player.y > house.y && player.y < house.y + house.height) {
                    game.isHiding = true;
                    showDialogue('üè† Ghar mein chhup gaye!', house.x + 60, house.y - 20);
                    setTimeout(() => {
                        game.isHiding = false;
                    }, 3000);
                }
            });
        }

        function updateUI() {
            document.getElementById('score').textContent = game.score;
            document.getElementById('points').textContent = game.points;
            document.getElementById('healthBar').style.width = game.health + '%';
        }

        function gameOver() {
            document.getElementById('gameOver').style.display = 'block';
            document.getElementById('finalScore').textContent = 
                `Final Score: ${game.score} | Points: ${game.points}`;
            playSound(150, 1, 'sawtooth');
        }

        function restartGame() {
            game.score = 0;
            game.points = 0;
            game.health = 100;
            game.isHiding = false;
            player.x = canvas.width / 2;
            player.y = canvas.height - 150;
            snake.health = 100;
            document.getElementById('gameOver').style.display = 'none';
            fruits.forEach(f => f.collected = false);
        }

        // Main game loop
        function gameLoop() {
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw environment
            drawSky();
            drawGround();
            drawPond();
            drawWaterfall();
            drawTrees();
            drawFruits();
            drawRocks();
            drawHouses();
            
            // Draw characters
            drawSnake();
            drawPlayer();
            drawGirl();
            
            // Update game
            movePlayer();
            moveSnake();
            checkCollisions();
            updateUI();
            
            requestAnimationFrame(gameLoop);
        }

        // Event listeners
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'ArrowUp':
                    player.dy = -1;
                    break;
                case 'ArrowDown':
                    player.dy = 1;
                    break;
                case 'ArrowLeft':
                    player.dx = -1;
                    break;
                case 'ArrowRight':
                    player.dx = 1;
                    break;
                case 'Shift':
                    game.isRunning = true;
                    break;
                case ' ':
                    attack();
                    break;
                case 't':
                case 'T':
                    talk();
                    break;
                case 'h':
                case 'H':
                    hideInHouse();
                    break;
            }
        });

        document.addEventListener('keyup', (e) => {
            switch(e.key) {
                case 'ArrowUp':
                case 'ArrowDown':
                    player.dy = 0;
                    break;
                case 'ArrowLeft':
                case 'ArrowRight':
                    player.dx = 0;
                    break;
                case 'Shift':
                    game.isRunning = false;
                    break;
            }
        });

        // Initialize and start game
        initEnvironment();
        gameLoop();
    </script>
</body>
</html>
